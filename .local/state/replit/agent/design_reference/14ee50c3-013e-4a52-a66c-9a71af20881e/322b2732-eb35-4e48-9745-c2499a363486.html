<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataCraft - Dashboard Builder for Designers</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    'inter': ['Inter', 'sans-serif'],
                },
                colors: {
                    primary: '#2563eb',
                    secondary: '#64748b',
                    accent: '#10b981',
                    surface: '#ffffff',
                    muted: '#f1f5f9',
                }
            }
        }
    };
    </script>
</head>
<body class="bg-slate-50 font-inter text-slate-900">

<!-- @COMPONENT: AppHeader [navigation, user menu, mobile toggle] -->
<header class="bg-white border-b border-slate-200 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <div class="flex items-center">
                <button id="mobile-menu-toggle" class="lg:hidden p-2 rounded-md text-slate-500 hover:text-slate-900 hover:bg-slate-100">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="flex-shrink-0 flex items-center ml-2 lg:ml-0">
                    <i class="fas fa-chart-bar text-primary text-2xl mr-3"></i>
                    <h1 class="text-xl font-bold text-slate-900">DataCraft</h1>
                </div>
            </div>
            
            <nav class="hidden md:flex space-x-8">
                <a href="#" class="text-primary font-medium">Dashboard</a>
                <a href="#" class="text-slate-500 hover:text-slate-900">Templates</a>
                <a href="#" class="text-slate-500 hover:text-slate-900">Data Sources</a>
                <a href="#" class="text-slate-500 hover:text-slate-900">Help</a>
            </nav>
            
            <div class="flex items-center space-x-4">
                <button class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors">
                    <i class="fas fa-save mr-2"></i>
                    <span class="hidden sm:inline">Save Dashboard</span>
                </button>
                <div class="w-8 h-8 bg-slate-300 rounded-full flex items-center justify-center">
                    <i class="fas fa-user text-slate-600 text-sm"></i>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- @END_COMPONENT: AppHeader -->

<div class="flex h-screen">
    <!-- @COMPONENT: Sidebar [tools, components, data sources] -->
    <aside id="sidebar" class="w-80 bg-white border-r border-slate-200 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out fixed lg:relative h-full z-40">
        <div class="p-6 border-b border-slate-200">
            <h2 class="text-lg font-semibold text-slate-900 mb-4">Dashboard Builder</h2>
            
            <!-- Tab Navigation -->
            <div class="flex space-x-1 bg-slate-100 p-1 rounded-lg">
                <button class="tab-btn active flex-1 py-2 px-3 text-sm font-medium rounded-md transition-colors" data-tab="components">
                    <i class="fas fa-puzzle-piece mr-2"></i>Components
                </button>
                <button class="tab-btn flex-1 py-2 px-3 text-sm font-medium rounded-md transition-colors" data-tab="data">
                    <i class="fas fa-database mr-2"></i>Data
                </button>
            </div>
        </div>
        
        <!-- Components Tab -->
        <div id="components-tab" class="tab-content p-6">
            <div class="space-y-6">
                <div>
                    <h3 class="text-sm font-semibold text-slate-700 mb-3">Chart Types</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="component-item p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 cursor-pointer transition-colors" draggable="true">
                            <i class="fas fa-chart-bar text-primary text-lg mb-2"></i>
                            <p class="text-xs font-medium text-slate-700">Bar Chart</p>
                        </div>
                        <div class="component-item p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 cursor-pointer transition-colors" draggable="true">
                            <i class="fas fa-chart-line text-primary text-lg mb-2"></i>
                            <p class="text-xs font-medium text-slate-700">Line Chart</p>
                        </div>
                        <div class="component-item p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 cursor-pointer transition-colors" draggable="true">
                            <i class="fas fa-chart-pie text-primary text-lg mb-2"></i>
                            <p class="text-xs font-medium text-slate-700">Pie Chart</p>
                        </div>
                        <div class="component-item p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 cursor-pointer transition-colors" draggable="true">
                            <i class="fas fa-braille text-primary text-lg mb-2"></i>
                            <p class="text-xs font-medium text-slate-700">Scatter Plot</p>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold text-slate-700 mb-3">Widgets</h3>
                    <div class="space-y-2">
                        <div class="component-item p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 cursor-pointer transition-colors flex items-center" draggable="true">
                            <i class="fas fa-tachometer-alt text-primary mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">KPI Card</span>
                        </div>
                        <div class="component-item p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 cursor-pointer transition-colors flex items-center" draggable="true">
                            <i class="fas fa-table text-primary mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">Data Table</span>
                        </div>
                        <div class="component-item p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 cursor-pointer transition-colors flex items-center" draggable="true">
                            <i class="fas fa-filter text-primary mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">Filter Panel</span>
                        </div>
                        <div class="component-item p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 cursor-pointer transition-colors flex items-center" draggable="true">
                            <i class="fas fa-align-left text-primary mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">Text Block</span>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold text-slate-700 mb-3">Quick Templates</h3>
                    <div class="space-y-2">
                        <button class="w-full p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 text-left transition-colors">
                            <i class="fas fa-rocket text-accent mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">Sales Dashboard</span>
                        </button>
                        <button class="w-full p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 text-left transition-colors">
                            <i class="fas fa-users text-accent mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">User Analytics</span>
                        </button>
                        <button class="w-full p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 text-left transition-colors">
                            <i class="fas fa-chart-area text-accent mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">Performance Report</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Data Tab -->
        <div id="data-tab" class="tab-content p-6 hidden">
            <div class="space-y-6">
                <div>
                    <h3 class="text-sm font-semibold text-slate-700 mb-3">Import Data</h3>
                    <div class="border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-primary transition-colors cursor-pointer">
                        <i class="fas fa-upload text-slate-400 text-2xl mb-3"></i>
                        <p class="text-sm text-slate-600 mb-2">Drop CSV files here or click to browse</p>
                        <input type="file" class="hidden" accept=".csv" />
                        <button class="text-primary text-sm font-medium hover:underline">Choose Files</button>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold text-slate-700 mb-3">Connected Sources</h3>
                    <div class="space-y-2">
                        <!-- @MAP: dataSources.map(source => ( -->
                        <div class="p-3 border border-slate-200 rounded-lg flex items-center justify-between" data-mock="true">
                            <div class="flex items-center">
                                <i class="fas fa-file-csv text-accent mr-3"></i>
                                <div>
                                    <p class="text-sm font-medium text-slate-700" data-bind="source.name">sales_data.csv</p>
                                    <p class="text-xs text-slate-500" data-bind="source.records">1,247 records</p>
                                </div>
                            </div>
                            <button class="text-slate-400 hover:text-slate-600">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                        <!-- @END_MAP )) -->
                        
                        <div class="p-3 border border-slate-200 rounded-lg flex items-center justify-between" data-mock="true">
                            <div class="flex items-center">
                                <i class="fas fa-file-csv text-accent mr-3"></i>
                                <div>
                                    <p class="text-sm font-medium text-slate-700">user_analytics.csv</p>
                                    <p class="text-xs text-slate-500">856 records</p>
                                </div>
                            </div>
                            <button class="text-slate-400 hover:text-slate-600">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                        
                        <div class="p-3 border border-slate-200 rounded-lg flex items-center justify-between" data-mock="true">
                            <div class="flex items-center">
                                <i class="fas fa-file-csv text-accent mr-3"></i>
                                <div>
                                    <p class="text-sm font-medium text-slate-700">performance_metrics.csv</p>
                                    <p class="text-xs text-slate-500">2,134 records</p>
                                </div>
                            </div>
                            <button class="text-slate-400 hover:text-slate-600">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold text-slate-700 mb-3">Sample Data</h3>
                    <div class="space-y-2">
                        <button class="w-full p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 text-left transition-colors">
                            <i class="fas fa-download text-secondary mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">E-commerce Sample</span>
                        </button>
                        <button class="w-full p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 text-left transition-colors">
                            <i class="fas fa-download text-secondary mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">Marketing Metrics</span>
                        </button>
                        <button class="w-full p-3 border border-slate-200 rounded-lg hover:border-primary hover:bg-blue-50 text-left transition-colors">
                            <i class="fas fa-download text-secondary mr-3"></i>
                            <span class="text-sm font-medium text-slate-700">Financial Data</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    <!-- @END_COMPONENT: Sidebar -->
    
    <!-- @COMPONENT: MainCanvas [dashboard builder, drag-drop area] -->
    <main class="flex-1 overflow-hidden">
        <div class="h-full flex flex-col">
            <!-- Canvas Header -->
            <div class="bg-white border-b border-slate-200 p-4 flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <h2 class="text-lg font-semibold text-slate-900" data-bind="dashboard.title">Marketing Dashboard</h2>
                    <span class="px-2 py-1 bg-slate-100 text-slate-600 rounded text-xs font-medium" data-bind="dashboard.lastSaved">Last saved 2 minutes ago</span>
                </div>
                
                <div class="flex items-center space-x-2">
                    <button class="p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors">
                        <i class="fas fa-undo"></i>
                    </button>
                    <button class="p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors">
                        <i class="fas fa-redo"></i>
                    </button>
                    <div class="w-px h-6 bg-slate-200 mx-2"></div>
                    <button class="p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors">
                        <i class="fas fa-mobile-alt"></i>
                    </button>
                    <button class="p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors">
                        <i class="fas fa-tablet-alt"></i>
                    </button>
                    <button class="p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors">
                        <i class="fas fa-desktop"></i>
                    </button>
                    <div class="w-px h-6 bg-slate-200 mx-2"></div>
                    <button class="bg-accent text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-emerald-600 transition-colors">
                        <i class="fas fa-eye mr-2"></i>Preview
                    </button>
                </div>
            </div>
            
            <!-- Canvas Area -->
            <div class="flex-1 bg-slate-50 overflow-auto">
                <div class="p-6">
                    <!-- @STATE: draggedComponent:object = null -->
                    <div id="dashboard-canvas" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 min-h-96">
                        
                        <!-- Sample Dashboard Components -->
                        <!-- @COMPONENT: KPICard [value, title, trend] -->
                        <div class="dashboard-item bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow relative group" data-mock="true">
                            <div class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="p-1 text-slate-400 hover:text-slate-600">
                                    <i class="fas fa-cog text-sm"></i>
                                </button>
                                <button class="p-1 text-slate-400 hover:text-red-500 ml-1">
                                    <i class="fas fa-trash text-sm"></i>
                                </button>
                            </div>
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-slate-600" data-bind="kpi.title">Total Revenue</h3>
                                <i class="fas fa-dollar-sign text-primary"></i>
                            </div>
                            <div class="flex items-end justify-between">
                                <div>
                                    <p class="text-2xl font-bold text-slate-900" data-bind="kpi.value">$124,582</p>
                                    <div class="flex items-center mt-1">
                                        <i class="fas fa-arrow-up text-accent text-xs mr-1"></i>
                                        <span class="text-accent text-sm font-medium" data-bind="kpi.change">+12.5%</span>
                                        <span class="text-slate-500 text-xs ml-1">vs last month</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- @END_COMPONENT: KPICard -->
                        
                        <!-- @COMPONENT: ChartWidget [type, data, styling] -->
                        <div class="dashboard-item col-span-1 md:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow relative group" data-mock="true">
                            <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="p-1 text-slate-400 hover:text-slate-600">
                                    <i class="fas fa-cog text-sm"></i>
                                </button>
                                <button class="p-1 text-slate-400 hover:text-red-500 ml-1">
                                    <i class="fas fa-trash text-sm"></i>
                                </button>
                            </div>
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-semibold text-slate-900" data-bind="chart.title">Sales Performance</h3>
                                <select class="text-sm border border-slate-200 rounded-lg px-3 py-1">
                                    <option>Last 7 days</option>
                                    <option>Last 30 days</option>
                                    <option>Last 90 days</option>
                                </select>
                            </div>
                            <!-- Chart Placeholder -->
                            <div class="h-64 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg flex items-center justify-center border border-slate-200">
                                <div class="text-center">
                                    <i class="fas fa-chart-line text-primary text-4xl mb-3"></i>
                                    <p class="text-slate-600 font-medium">Line Chart Visualization</p>
                                    <p class="text-slate-500 text-sm mt-1">Chart.js integration</p>
                                </div>
                            </div>
                        </div>
                        <!-- @END_COMPONENT: ChartWidget -->
                        
                        <!-- Another KPI Card -->
                        <div class="dashboard-item bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow relative group" data-mock="true">
                            <div class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="p-1 text-slate-400 hover:text-slate-600">
                                    <i class="fas fa-cog text-sm"></i>
                                </button>
                                <button class="p-1 text-slate-400 hover:text-red-500 ml-1">
                                    <i class="fas fa-trash text-sm"></i>
                                </button>
                            </div>
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-slate-600">Active Users</h3>
                                <i class="fas fa-users text-primary"></i>
                            </div>
                            <div class="flex items-end justify-between">
                                <div>
                                    <p class="text-2xl font-bold text-slate-900">8,429</p>
                                    <div class="flex items-center mt-1">
                                        <i class="fas fa-arrow-up text-accent text-xs mr-1"></i>
                                        <span class="text-accent text-sm font-medium">+8.2%</span>
                                        <span class="text-slate-500 text-xs ml-1">vs last week</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pie Chart Widget -->
                        <div class="dashboard-item bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow relative group" data-mock="true">
                            <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="p-1 text-slate-400 hover:text-slate-600">
                                    <i class="fas fa-cog text-sm"></i>
                                </button>
                                <button class="p-1 text-slate-400 hover:text-red-500 ml-1">
                                    <i class="fas fa-trash text-sm"></i>
                                </button>
                            </div>
                            <h3 class="text-lg font-semibold text-slate-900 mb-6">Traffic Sources</h3>
                            <div class="h-48 bg-gradient-to-br from-purple-50 to-pink-100 rounded-lg flex items-center justify-center border border-slate-200">
                                <div class="text-center">
                                    <i class="fas fa-chart-pie text-primary text-3xl mb-3"></i>
                                    <p class="text-slate-600 font-medium">Pie Chart</p>
                                    <p class="text-slate-500 text-sm mt-1">Source breakdown</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Data Table Widget -->
                        <div class="dashboard-item bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow relative group" data-mock="true">
                            <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="p-1 text-slate-400 hover:text-slate-600">
                                    <i class="fas fa-cog text-sm"></i>
                                </button>
                                <button class="p-1 text-slate-400 hover:text-red-500 ml-1">
                                    <i class="fas fa-trash text-sm"></i>
                                </button>
                            </div>
                            <h3 class="text-lg font-semibold text-slate-900 mb-4">Top Products</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b border-slate-200">
                                            <th class="text-left py-2 text-slate-600 font-medium">Product</th>
                                            <th class="text-right py-2 text-slate-600 font-medium">Sales</th>
                                        </tr>
                                    </thead>
                                    <tbody data-mock="true">
                                        <tr class="border-b border-slate-100">
                                            <td class="py-2 text-slate-700">Pro Dashboard</td>
                                            <td class="py-2 text-right font-medium">$12,450</td>
                                        </tr>
                                        <tr class="border-b border-slate-100">
                                            <td class="py-2 text-slate-700">Analytics Suite</td>
                                            <td class="py-2 text-right font-medium">$8,230</td>
                                        </tr>
                                        <tr class="border-b border-slate-100">
                                            <td class="py-2 text-slate-700">Data Connector</td>
                                            <td class="py-2 text-right font-medium">$5,890</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Drop Zone for New Components -->
                        <div class="dashboard-drop-zone border-2 border-dashed border-slate-300 rounded-xl p-8 flex items-center justify-center text-center hover:border-primary hover:bg-blue-50 transition-colors min-h-48">
                            <div>
                                <i class="fas fa-plus text-slate-400 text-3xl mb-3"></i>
                                <p class="text-slate-500 font-medium">Drag components here</p>
                                <p class="text-slate-400 text-sm">or click to add widgets</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- @END_COMPONENT: MainCanvas -->
</div>

<!-- @COMPONENT: MobileDrawer [overlay for mobile sidebar] -->
<div id="mobile-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden hidden"></div>
<!-- @END_COMPONENT: MobileDrawer -->

<!-- @COMPONENT: PropertyPanel [component configuration] -->
<div id="property-panel" class="fixed right-0 top-16 w-80 bg-white border-l border-slate-200 h-screen transform translate-x-full transition-transform duration-300 ease-in-out z-20 hidden">
    <div class="p-6 border-b border-slate-200">
        <div class="flex items-center justify-between">
            <h3 class="text-lg font-semibold text-slate-900">Component Settings</h3>
            <button id="close-properties" class="p-1 text-slate-400 hover:text-slate-600">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    
    <div class="p-6 space-y-6">
        <!-- @FUNCTIONALITY: This panel should show different configuration options based on selected component type -->
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-2">Title</label>
                <input type="text" class="w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Chart title" />
            </div>
            
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-2">Data Source</label>
                <select class="w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                    <option>sales_data.csv</option>
                    <option>user_analytics.csv</option>
                    <option>performance_metrics.csv</option>
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-2">Chart Color</label>
                <div class="flex space-x-2">
                    <button class="w-8 h-8 bg-blue-500 rounded-lg border-2 border-blue-500"></button>
                    <button class="w-8 h-8 bg-emerald-500 rounded-lg border-2 border-transparent hover:border-slate-300"></button>
                    <button class="w-8 h-8 bg-purple-500 rounded-lg border-2 border-transparent hover:border-slate-300"></button>
                    <button class="w-8 h-8 bg-red-500 rounded-lg border-2 border-transparent hover:border-slate-300"></button>
                </div>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-2">Size</label>
                <select class="w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                    <option>Small (1 column)</option>
                    <option>Medium (2 columns)</option>
                    <option>Large (3 columns)</option>
                </select>
            </div>
        </div>
    </div>
</div>
<!-- @END_COMPONENT: PropertyPanel -->

<script>
(function() {
    // Mobile menu toggle
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const sidebar = document.getElementById('sidebar');
    const mobileOverlay = document.getElementById('mobile-overlay');
    
    mobileMenuToggle.addEventListener('click', function() {
        sidebar.classList.toggle('-translate-x-full');
        mobileOverlay.classList.toggle('hidden');
    });
    
    mobileOverlay.addEventListener('click', function() {
        sidebar.classList.add('-translate-x-full');
        mobileOverlay.classList.add('hidden');
    });

    // Tab switching
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabButtons.forEach(button => {
        button.addEventListener('click', function() {
            const tabName = this.getAttribute('data-tab');
            
            // Update active tab button
            tabButtons.forEach(btn => {
                btn.classList.remove('active', 'bg-white', 'text-primary', 'shadow-sm');
                btn.classList.add('text-slate-600', 'hover:text-slate-900');
            });
            this.classList.add('active', 'bg-white', 'text-primary', 'shadow-sm');
            this.classList.remove('text-slate-600', 'hover:text-slate-900');
            
            // Show active tab content
            tabContents.forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(tabName + '-tab').classList.remove('hidden');
        });
    });
    
    // Initialize first tab as active
    tabButtons[0].classList.add('bg-white', 'text-primary', 'shadow-sm');
    tabButtons[0].classList.remove('text-slate-600', 'hover:text-slate-900');

    // Dashboard item interactions
    const dashboardItems = document.querySelectorAll('.dashboard-item');
    const propertyPanel = document.getElementById('property-panel');
    const closePropertiesBtn = document.getElementById('close-properties');
    
    dashboardItems.forEach(item => {
        item.addEventListener('click', function() {
            // Remove active state from other items
            dashboardItems.forEach(i => i.classList.remove('ring-2', 'ring-primary'));
            // Add active state to clicked item
            this.classList.add('ring-2', 'ring-primary');
            
            // Show property panel
            propertyPanel.classList.remove('translate-x-full', 'hidden');
        });
    });
    
    closePropertiesBtn.addEventListener('click', function() {
        propertyPanel.classList.add('translate-x-full');
        dashboardItems.forEach(i => i.classList.remove('ring-2', 'ring-primary'));
    });

    // Component drag and drop setup
    const componentItems = document.querySelectorAll('.component-item');
    const dashboardCanvas = document.getElementById('dashboard-canvas');
    const dropZone = document.querySelector('.dashboard-drop-zone');
    
    componentItems.forEach(item => {
        item.addEventListener('dragstart', function(e) {
            e.dataTransfer.setData('text/plain', this.innerHTML);
            this.classList.add('opacity-50');
        });
        
        item.addEventListener('dragend', function() {
            this.classList.remove('opacity-50');
        });
    });
    
    dashboardCanvas.addEventListener('dragover', function(e) {
        e.preventDefault();
        dropZone.classList.add('border-primary', 'bg-blue-50');
    });
    
    dashboardCanvas.addEventListener('dragleave', function(e) {
        if (!dashboardCanvas.contains(e.relatedTarget)) {
            dropZone.classList.remove('border-primary', 'bg-blue-50');
        }
    });
    
    dashboardCanvas.addEventListener('drop', function(e) {
        e.preventDefault();
        dropZone.classList.remove('border-primary', 'bg-blue-50');
        
        // TODO: Implement component creation logic
        console.log('Component dropped:', e.dataTransfer.getData('text/plain'));
        
        // Show success feedback
        const originalContent = dropZone.innerHTML;
        dropZone.innerHTML = `
            <div>
                <i class="fas fa-check text-accent text-3xl mb-3"></i>
                <p class="text-accent font-medium">Component Added!</p>
                <p class="text-slate-500 text-sm">Configure it in the sidebar</p>
            </div>
        `;
        
        setTimeout(() => {
            dropZone.innerHTML = originalContent;
        }, 2000);
    });

    // File upload handling
    const fileInput = document.querySelector('input[type="file"]');
    const dropArea = fileInput.closest('.border-dashed');
    
    dropArea.addEventListener('click', () => fileInput.click());
    
    fileInput.addEventListener('change', function(e) {
        const files = Array.from(e.target.files);
        files.forEach(file => {
            // TODO: Implement CSV parsing and data validation
            console.log('File selected:', file.name);
        });
    });

    // Responsive grid adjustment
    function adjustGridForMobile() {
        const canvas = document.getElementById('dashboard-canvas');
        if (window.innerWidth < 768) {
            canvas.classList.remove('md:grid-cols-2', 'lg:grid-cols-3');
            canvas.classList.add('grid-cols-1');
        } else if (window.innerWidth < 1024) {
            canvas.classList.remove('lg:grid-cols-3');
            canvas.classList.add('md:grid-cols-2');
        } else {
            canvas.classList.add('lg:grid-cols-3');
        }
    }
    
    window.addEventListener('resize', adjustGridForMobile);
    adjustGridForMobile();

    // Touch gesture support for mobile
    let touchStartY = 0;
    let touchStartX = 0;
    
    document.addEventListener('touchstart', function(e) {
        touchStartY = e.touches[0].clientY;
        touchStartX = e.touches[0].clientX;
    });
    
    document.addEventListener('touchmove', function(e) {
        if (!sidebar.classList.contains('-translate-x-full')) {
            const touchY = e.touches[0].clientY;
            const touchX = e.touches[0].clientX;
            const diffY = touchStartY - touchY;
            const diffX = touchStartX - touchX;
            
            // Swipe left to close sidebar on mobile
            if (diffX > 50 && Math.abs(diffY) < 100) {
                sidebar.classList.add('-translate-x-full');
                mobileOverlay.classList.add('hidden');
            }
        }
    });

    // Auto-save functionality
    let autoSaveTimer;
    function scheduleAutoSave() {
        clearTimeout(autoSaveTimer);
        autoSaveTimer = setTimeout(() => {
            // TODO: Implement auto-save to localStorage
            console.log('Auto-saving dashboard...');
            const saveIndicator = document.querySelector('[data-bind="dashboard.lastSaved"]');
            if (saveIndicator) {
                saveIndicator.textContent = 'Last saved just now';
            }
        }, 5000);
    }
    
    // Trigger auto-save on any dashboard changes
    dashboardCanvas.addEventListener('click', scheduleAutoSave);
    
})();
</script>

</body>
</html>